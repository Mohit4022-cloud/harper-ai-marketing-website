services:
  # Static site service
  - type: web
    name: harper-ai-website
    runtime: static
    buildCommand: npm install && npm run build:prod
    staticPublishPath: ./dist
    pullRequestPreviewsEnabled: true
    headers:
      - path: /*
        name: X-Frame-Options
        value: SAMEORIGIN
      - path: /*
        name: X-Content-Type-Options
        value: nosniff
      - path: /*
        name: X-XSS-Protection
        value: 1; mode=block
      - path: /*
        name: Referrer-Policy
        value: no-referrer-when-downgrade
    routes:
      - type: rewrite
        source: /*
        destination: /index.html
      - type: rewrite
        source: /assets/*
        destination: /assets/*
      - type: rewrite
        source: /images/*
        destination: /images/*
      - type: rewrite
        source: /favicon.ico
        destination: /favicon.ico
      - type: rewrite
        source: /robots.txt
        destination: /robots.txt
      - type: rewrite
        source: /sitemap.xml
        destination: /sitemap.xml

  # Alternative: Docker-based deployment
  # Uncomment below if you prefer Docker deployment
  # - type: web
  #   name: harper-ai-website-docker
  #   runtime: docker
  #   dockerfilePath: ./Dockerfile
  #   dockerContext: .
  #   healthCheckPath: /health
  #   envVars:
  #     - key: PORT
  #       value: 10000